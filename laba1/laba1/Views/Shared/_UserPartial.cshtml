@using Microsoft.AspNetCore.Identity
@using laba1.DAL
@inject SignInManager<ApplicationUser> SignInManager

<!-- Информация пользователя -->
@await Component.InvokeAsync("Cart")
<div class="dropdown ml-4 nav-color">
  <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
    <img src="images/avatar.jpg" width="30" alt="User" class="rounded" />
  </button>
  
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
    <li>
      <div class="dropdown-item-text">
        <img src="images/avatar.jpg" width="50" alt="User" class="rounded" />
        user@mail.ru
      </div>
    </li>
    
    <li><hr class="dropdown-divider"></li>
    
     <a class="dropdown-item" asp-controller="Cart" asp-action="Index">Мои товары</a>
     <a class="dropdown-item" asp-area="Identity" asp-page="/Account/Logout">Log off</a>
  </ul>
</div>
<!-- Информация пользователя - конец -->

@if (SignInManager.IsSignedIn(User))
{
    <p>Имя пользователя: @User.Identity.Name</p>
    <form asp-area="Identity" asp-page="/Account/Logout" method="post" id="logoutForm">
        <button type="submit" class="nav-link btn btn-link">Log off</button>
    </form>
}
else
{
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="Identity" asp-page="/Account/Login">Войти</a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-dark" asp-area="Identity" asp-page="/Account/Register">Зарегистрироваться</a>
        </li>
    </ul>
}

